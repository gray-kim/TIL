# db index

### index란?
데이터베이스의 테이블에 대한 검색 속도를 향상시켜주는 자료구조이다.  

특정 테이블의 column에 대한 index를 만들면 데이터베이스 열의 검색 속도가 빨라져서 쿼리의 성능이 향상된다 !

index를 타지 못하면 '전체 테이블 스캔(full scan)' 방식을 사용하여 데이터를 찾게 된다. (처음부터 끝까지 찾기..검색 속도가 느리겠죠?)

index를 탄다 == index를 통해 효율적인 검색을 한다


### index를 설정하면 좋은 조건
- write보다 read의 빈도가 더 높은 컬럼 (검색, 필터 등이 적용되는)
- data row 수가 많은 경우
- 인덱스를 적용한 컬럼이 where절에서 많이 사용되는 경우
- 검색 결과가 원본 테이블 데이터에 비해 적을 경우
- 해당 컬럼이 null을 포함하는 경우 (NULL 값을 가진 노드를 건너뛰고 검색을 수행)

### index 추가, 제거
```
CREATE INDEX 인덱스명 ON 테이블명 (컬럼명);
DROP INDEX 인덱스명;
```


### index 주의사항
대표적인 실수로 index가 걸려있는 값을 형변환 해서 검색하는 경우가 있다. 형변환이 이루어진 경우, 쿼리에서 사용하는 조건 값이 인덱스 컬럼과 데이터 타입이 일치하지 않아 풀 스캔을 수행하게 된다.


### text형태의 컬럼에는 fulltext를 사용
풀텍스트 인덱스는 데이터베이스 테이블의 컬럼에 대한 인덱스 유형으로, 컬럼의 텍스트를 검색하는 데 사용할 수 있습니다. 풀텍스트 인덱스를 사용하면 사용자가 텍스트를 검색할 때 데이터베이스가 텍스트를 빠르게 찾을 수 있으므로 데이터베이스 성능을 향상시키는 데 도움이 될 수 있습니다.

풀텍스트 인덱스는 일반적으로 텍스트가 포함된 테이블에 사용됩니다. 예를 들어, 뉴스 기사가 포함된 테이블이 있는 경우 풀텍스트 인덱스를 사용하여 기사 제목 또는 본문에서 기사를 검색할 수 있습니다.

풀텍스트 인덱스를 생성하려면 CREATE INDEX 문과 FULLTEXT 키워드를 사용합니다. 예를 들어, articles 테이블의 title 컬럼에 풀텍스트 인덱스를 생성하려면 다음 문을 사용합니다.

```
CREATE INDEX title_idx ON articles (title) FULLTEXT;
alter table product_variations add FULLTEXT (model, erp_code);
```

풀텍스트 인덱스를 사용하려면 검색 구문을 사용합니다. 예를 들어, "the cat"이라는 문구가 포함된 기사를 검색하려면 다음 문을 사용합니다.

```
SELECT * FROM articles WHERE MATCH (title) AGAINST ("the cat");
```

이 문은 "the cat"이라는 문구가 포함된 모든 기사를 반환합니다.

풀텍스트 인덱스는 데이터베이스 성능을 향상시키는 데 사용할 수 있는 강력한 도구입니다. 텍스트가 포함된 테이블이 있는 경우 풀텍스트 인덱스를 사용하여 데이터베이스 성능을 향상시킬 수 있는지 확인하는 것이 좋습니다.